{% extends "rpm_layout.html" %}
{% block body %}
  <div class="differences">
    {% for id_comp, comp in comparison.items() %}
      <h3>Comparison</h3>
      <table>
        <tr>
          <td>Comparison</td>
          <td><a href="{{ url_for('rpmdiff.show_groups', id=comp['id_group']) }}">{{ id_comp }}</a></td>
        </tr>
        <tr>
          <td>Package 1</td>
          <td><a href="{{ url_for('rpmdiff.show_packages', id=comp['pkg1']['id']) }}">{{ comp['pkg1']['filename'] }}</a></td>
        </tr>
        <tr>
          <td>Package 2</td>
          <td><a href="{{ url_for('rpmdiff.show_packages', id=comp['pkg2']['id']) }}">{{ comp['pkg2']['filename'] }}</a></td>
        </tr>
        <tr>
          <td>State</td>
          <td>{{ comp['state'] }}</td>
        </tr>
      </table>

      <form action="{{ url_for('rpmdiff.filter_diffs') }}" method="post">
        <input type="hidden" name="id_comp" value="{{ id_comp }}" />
        <input type="submit" value="Filter" />
      </form>
      <form action="{{ url_for('rpmdiff.show_comments_comp', id_comp=id_comp) }}" method="get">
        <input type="submit" value="Comments" />
      </form>

      <h3>Differences in tags</h3>
      <table>
        {% include 'rpm_difference_header.html' %}
        {% for diff in comp['differences'] if diff['category'] == CATEGORY_STRINGS[CATEGORY_TAGS] %}
          {% include 'rpm_difference.html' %}
        {% endfor %}
      </table>

      <h3>Differences in dependencies</h3>
      <table>
        {% include 'rpm_difference_header.html' %}
        {% for diff in comp['differences'] if diff['category'] == CATEGORY_STRINGS[CATEGORY_PRCO] %}
          {% include 'rpm_difference.html' %}
        {% endfor %}
      </table>

      <h3>Differences in files</h3>
      <table>
        {% include 'rpm_difference_header.html' %}
        {% for diff in comp['differences'] if diff['category'] == CATEGORY_STRINGS[CATEGORY_FILES] %}
          {% include 'rpm_difference.html' %}
        {% endfor %}
      </table>
    {% endfor %}
  </div>
{% endblock %}
