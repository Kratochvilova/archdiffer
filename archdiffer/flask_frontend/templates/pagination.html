<div class="center">
  <div class="pagination">

    {% if items_count>limit %}

      <a {% if offset == 0 %} class="disables" 
         {% elif offset <= limit %} href="{{ url_for(request.endpoint, limit=limit, offset=0, **request.view_args) }}"
         {% else %}href="{{ url_for(request.endpoint, limit=limit, offset=offset-limit, **request.view_args) }}"  {% endif %}>&laquo;</a>

      {% for i in range((items_count-1)//limit+1) %}
        {% if i == 0 or i == (items_count-1)//limit+1 - 1 or
              (i > offset/limit - 3 and i < offset/limit + 3) or
              (i < 6 and offset/limit < 3) or
              (i > (items_count-1)//limit+1 - 6 and offset/limit > (items_count-1)//limit+1 - 3)
        %}
          <a {% if offset == i*limit %} class="active" {% endif %} href="{{ url_for(request.endpoint, limit=limit, offset=i*limit, **request.view_args) }}">{{ i+1 }}</a>
        {% elif i == 1 %}
          <a  class="disables" >...</a>
        {% elif i == (items_count-1)//limit+1 - 2 %}
          <a  class="disables" >...</a>
        {% endif %}
      {% endfor %}

      <a {% if items_count-limit <= offset %} class="disables" 
         {% else %}href="{{ url_for(request.endpoint, limit=limit, offset=offset+limit, **request.view_args) }}"  {% endif %}>&raquo;</a>

    {% endif %}

  </div>
</div>
